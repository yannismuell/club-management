<div class="container-fluid" ng-show="getSignedInState()">
    <div class="row">
        <div ng-include src="'partials/management_nav.html'"></div>
        <main role="main" class="col-sm-9 ml-sm-auto col-md-10 pt-3">
            <div class="row">
                <div class="col-lg-12">
                    <div id="messages" class="alert alert-{{alertStatus}}" >
                        <span ng-bind="messages"></span>
                        <i class="dismiss-messages pull-right glyphicon glyphicon-remove" ng-show="messages"></i>
                    </div>
                    <img class="spinner" src="/img/ajax-loader.gif" ng-show="loading"/>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-lg-12">
                    <div class="row" ng-init="init()">
                        <div class="col-xs-12 col-sm-12 col-lg-12">
                            <table class="table table-striped table-hover">
                                <thead>
                                <tr>
                                    <th><h2>Department Details</h2></th>
                                    <th><h3>{{department.name}} ({{department.description}})</h3></th>
                                    <th><a class="btn btn-outline-primary" href="#!/departments/edit/{{department.websafeDepartmentKey}}" role="button">Edit &raquo;</a></th>
                                </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                <button ng-click="showRequirements()" type="button" class="btn btn-outline-primary" ng-class="{active: req}">Requirements </button>
                <button ng-click="showEmployees()" type="button" class="btn btn-outline-primary " ng-class="{active: !req}">Employees</button>
            </div>

            <!--        Adding and displaying shift data  -->
            <div ng-show="req" class="row">
                <div class="col-xs-12 col-sm-12 col-lg-12">
                    <div ng-show="!submitted && shifts.length == 0">
                        <table id="header-table" class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th><h4>No matching results.</h4></th>
                                <th><a class="btn btn-outline-primary btn-add-custom" href="#!/departments/addShift/{{department.websafeDepartmentKey}}" role="button" ng-disabled="loading">Add Shift &raquo;</a></th>
                            </tr>
                            </thead>
                        </table>
                    </div>
                    <div ng-show="!submitted && shifts.length > 0"class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th><h3>Shifts</h3></th>
                                <th><a class="btn btn-outline-primary btn-add-custom" href="#!/departments/addShift/{{department.websafeDepartmentKey}}" role="button" ng-disabled="loading">Add Shift &raquo;</a></th>
                            </tr>
                            </thead>
                        </table>
                        <table class="table table-striped table-hover">
                            <tbody>
                            <tr ng-repeat="shift in shifts">
                                <td>
                                    <table id="skill-table" class="table table-condensed table-striped table-hover">
                                        <thead>
                                        <tr>
                                            <th></th>
                                            <th><h4>{{shift.name}}</h4></th>
                                            <th><a class="btn btn-add-custom" href="#!/departments/editShift/{{department.websafeDepartmentKey}}/{{shift.id}}" role="button" ng-disabled="loading">Edit Shift &raquo;</a></th>
                                            <th><button ng-click="deleteShiftWithId(shift.id)" class="btn btn-outline-danger" ng-disabled="loading" title="Delete Shift">Delete Shift</button></th>
                                        </tr>
                                        <tr>
                                            <th class="custom-weekend">
                                                <noop ng-show="shift.weekDays[5]">Sat&nbsp;</noop>
                                                <noop ng-show="shift.weekDays[6]">Sun&nbsp;</noop>
                                            </th>
                                            <th class="custom-workdays"><noop ng-show="shift.weekDays[0]">Mon&nbsp;</noop>
                                                <noop ng-show="shift.weekDays[1]">Tue&nbsp;</noop>
                                                <noop ng-show="shift.weekDays[2]">Wed&nbsp;</noop>
                                                <noop ng-show="shift.weekDays[3]">Thu&nbsp;</noop>
                                                <noop ng-show="shift.weekDays[4]">Fri&nbsp;</noop>
                                            </th>
                                            <th><input type="time" class="form-control" ng-model="shift.startTime" disabled="disabled"></th>
                                            <th><input type="time" class="form-control" ng-model="shift.endTime" disabled="disabled"></th>
                                        </tr>
                                        <tr>
                                            <th><h5>Skills</h5></th>
                                        </tr>
                                        <tr>
                                            <th>#</th>
                                            <th>Skill</th>
                                            <th>Level</th>
                                            <th>Exclusive</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr ng-repeat="skill in shift.skillsForShift">
                                            <td>{{skill.count}}</td>
                                            <td>{{nameMap.get(skill.websafeSkillKey)}}</td>
                                            <td>{{skill.experience_options[skill.experience]}}</td>
                                            <td><input id="exclusiveCheckBox" type="checkbox" ng-model="skill.exclusive" title="Check if exclusive requirement" disabled="disabled"></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!--        End of shift data  -->

            <!--
            -->
            <div ng-show="!req" class="row">
                <div class="col-xs-12 col-sm-12 col-lg-12">
                    <table  class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th><h2>Employees </h2></th>
                            <th>
                                <form ng-show="employees.length > 0">
                                    <div class="input-group">
                                        <span class="input-group-btn glyphicon glyphicon-search">
                                          <button type="submit" ng-click="queryEmployees(search_field)" class="modal-action btn btn-secondary" type="button">Search</button>
                                        </span>
                                        <input id="query-input" type="text" class="form-control" placeholder="Search Employee Name or ID" ng-model="search_field" autofocus>
                                    </div>
                                </form>
                            </th>
                            <th><button ng-click="removeAllEmployees()" class="btn btn-outline-danger" ng-disabled="loading" title="Remove All Employees from Department">Remove All &raquo;</button></th>
                        </tr>
                        </thead>
                    </table>

                    <table ng-show="filteredEmployees.length == 0" class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th><h4>No matching results.</h4></th>
                            <th><button ng-click="addEmployees()" class="btn btn-outline-primary btn-add-custom" ng-disabled="loading">Add Employee(s) &raquo;</button></th>
                        </tr>
                        </thead>
                    </table>
                    <div ng-show="filteredEmployees.length > 0" class="table-responsive">
                        <table id="employee-table" class="table table-striped table-hover">
                            <thead>
                            <tr>
                                <th>Id, Name</th>
                                <th><button ng-click="addEmployees()" class="btn btn-outline-primary btn-add-custom" ng-disabled="loading">Add Employee(s) &raquo;</button></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="employee in filteredEmployees | orderBy: 'surName+name'" >
                                <td><div><a href="#!/employees/detail/{{employee.websafeEmployeeKey}}">{{employee.employeeID}}</a></div></td>
                                <td><div><a href="#!/employees/detail/{{employee.websafeEmployeeKey}}">{{employee.surName}}, {{employee.firstName}}</a></div></td>
                                <td><button ng-click="removeEmployeeWithWebsafeEmployeeKey(employee.websafeEmployeeKey)" class="btn btn-outline-danger" ng-disabled="loading" title="Remove Employee">&#10008;</button></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <ul class="pagination" ng-show="filteredEmployees.length > 0">
                        <li ng-class="{disabled: pagination.currentPage == 0 }">
                            <a ng-class="{disabled: pagination.currentPage == 0 }"
                               ng-click="pagination.isDisabled($event) || (pagination.currentPage = 0)" href="">&lt&lt</a>&nbsp &nbsp
                        </li>
                        <li ng-class="{disabled: pagination.currentPage == 0 }">
                            <a ng-class="{disabled: pagination.currentPage == 0 }"
                               ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage - 1)" href="">&lt</a>&nbsp &nbsp
                        </li>

                        <!-- ng-repeat creates a new scope. Need to specify the pagination.currentPage as $parent.pagination.currentPage -->
                        <li ng-repeat="page in pagination.pageArray()">
                            <a ng-click="$parent.pagination.currentPage = page" id="pagination-item" ng-class="{'active': $parent.pagination.currentPage == page}" href="">{{page + 1}}</a>&nbsp &nbsp
                        </li>
                        <li ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
                            <a ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
                               ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.currentPage + 1)" href="">&gt</a>&nbsp &nbsp
                        </li>
                        <li ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}">
                            <a ng-class="{disabled: pagination.currentPage == pagination.numberOfPages() - 1}"
                               ng-click="pagination.isDisabled($event) || (pagination.currentPage = pagination.numberOfPages() - 1)" href="">&gt&gt</a>
                        </li>
                    </ul>
                    <div>
                    </div>
                </div>
            </div>
            <p><a class="nav-link" onclick="window.history.back();" href="">« Back</a></p>
        </main>
    </div>
</div>

